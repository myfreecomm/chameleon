@import '../../abstracts/helpers';
@import '../../abstracts/layers';
@import '../../abstracts/menu';
@import '../../abstracts/space';
@import '../../abstracts/typography';

.ch-template-header {

  // 1. Base

  display: flex;
  align-items: center;
  justify-content: space-between;

  &,
  > .ch-breadcrumbs,
  > .ch-menu {
    position: relative;
  }

  // 2. Background

  &:before {
    $empty: '';

    display: block;
    position: absolute;
    width: 100%;
    height: 100%;

    content: $empty;
    background: #{ch-get-color(neutral, 1)};
  }

  // 3. Breadcrumbs

  > .ch-breadcrumbs {
    order: 1;

    max-width: calc(100% - #{ch-calc-box-height()} * 3);
    padding-right: #{ch-get-space(s)};
    padding-left: #{ch-get-space(s)};
    font-size: #{ch-get-text-size(3)};

    // 3.1. Last item

    .ch-breadcrumbs-item:last-child {
      @include ch-truncate;
    }
  }

  // 4. Menu

  > .ch-menu {
    @extend %ch-menu-horizontal;

    order: 2;

    max-width: calc(#{ch-calc-box-height()} * 3);

    // 4.1. Item

    > .ch-menu-item {
      opacity: 0.8;

      &:not(:nth-child(1)):not(:nth-child(2)):not(:nth-child(3)) {
        display: none;
      }
  
      &:hover:focus,
      &:hover,
      &:focus {
        opacity: 1;
        background: transparent;
      }

      > .ch-menu-item-label {
        text-transform: uppercase;
        font-weight: #{ch-get-text-weight(bold)};
      }
    }

    // 4.2. Expanded state

    &.is-expanded {
      max-width: 100%;
      margin-left: #{ch-calc-box-height()};

      > .ch-menu-item {
        &.ch-more {
          position: fixed;
          left: 0;
        }

        &:not(:nth-child(1)):not(:nth-child(2)):not(:nth-child(3)) {
          display: block;
        }

        &:not(.ch-menu-item--icon) > .ch-menu-item-label {
          width: max-content;
        }
      }

      + .ch-breadcrumbs {
        display: none;
      }
    }
  }

  // 4.3. Sticky state

  &.is-sticky {
    @include ch-shadow(2, top-bottom);

    position: sticky;
    top: 0;

    &:before {
      opacity: 0.95;
    }
  }
}
