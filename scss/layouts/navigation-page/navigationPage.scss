.ch-navigationPage {
  // 1. Base

  @include ch-media (to, mobile) {
    $header-size: ch-calc-box-height(ch-get-text-size(2), ch-get-space(s));

    padding-bottom: calc(#{ch-get-dimension(1)} + #{ch-get-space(s)});
    min-height: calc(100vh - #{$header-size});
  }

  @include ch-media (only, tablet) {
    padding-bottom: ch-get-space();
  }

  @include ch-media (from, tablet) {
    min-height: calc(100vh - #{ch-get-dimension(1)});
  }

  @include ch-media(from, desktop) {
    @include ch-border(top);
  }

  display: flex;
  flex-direction: column;
  justify-content: space-between;

  // 2. Aside

  &-aside {
    @include ch-media(from, desktop) {
      @include ch-transition(left);

      $actions-height: calc(#{ch-get-dimension(2)} + #{ch-get-space(xs)});

      position: fixed;
      top: calc(#{ch-get-dimension(1)} + #{$ch-border-width});
      left: ch-get-dimension(1);
      width: ch-get-dimension(2);

      padding-top: ch-get-space(xl);
      padding-right: ch-get-space(l);
      padding-left: ch-get-space(l);
      height: calc(100vh - #{$actions-height});

      &:after {
        $empty: '';

        display: block;
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;

        content: $empty;
        width: 100%;
        height: calc(100% + #{$actions-height});
        background: #{ch-get-color(neutral, 2)};
      }
    }

    padding-top: ch-get-space(xl);

    // 2.1. Steps and Menu

    > .ch-steps,
    > .ch-menu {
      @include ch-media(from, tablet) {
        @include ch-transition(left);

        $nav-top: ch-get-dimension(1);
        
        top: $nav-top;
        left: $nav-top;
      }

      @include ch-media(from, desktop) {
        position: relative;
        top: auto;
        left: auto;
        right: auto;

        background: transparent;
      }

      $nav-top: ch-calc-box-height(ch-get-text-size(2), ch-get-space(s));

      @include ch-transition(top);

      position: fixed;
      top: $nav-top;
      left: 0;
      right: 0;
      z-index: #{ch-get-z-index(2, 2)};

      background: #{ch-get-color(neutral, 1)};
    }

    > .ch-steps {
      @include ch-media(only, mobile) {
        @include ch-space-inset(default, xs);
      }
      
      @include ch-media(only, tablet) {
        @include ch-space-inset(squish, l);
      }

      @include ch-media(from, desktop) {
        @include ch-space-stack-group(s);

        overflow-x: initial;

        .ch-steps-item {
          margin-right: 0;
          width: 100%;
        }

        .ch-steps-item-label {
          display: block;
          width: auto;
        }
      }
    }
  }

  // 3. Content

  &-content {
    @include ch-space-stack;

    @include ch-media(from, desktop) {
      margin-left: #{ch-get-dimension(2)};
      margin-bottom: 0;
    }

    flex: 1;

    // 3.1. Contained variation

    &--contained {
      max-width: calc(#{$ch-breakpoint-desktop} - #{ch-get-dimension(2)});
    }
  }

  // 4. Actions

  &-actions {
    @include ch-media(only, mobile) {
      @include ch-space-stack-group(xs);

      > .ch-button.has-icon {
        padding-right: ch-calc-box-height();
      }

      > .ch-button.has-iconRight {
        padding-left: ch-calc-box-height();
      }
    }

    @include ch-media(only, tablet) {
      @include ch-space-inline-group(right, xs);

      > *:not(:last-child) {
        margin-bottom: 0;
      }
    }

    @include ch-media(from, desktop) {
      @include ch-transition(left);
      @include ch-space-stack-group(xs);

      position: fixed;
      bottom: 0;
      left: ch-get-dimension(1);
      width: ch-get-dimension(2);

      padding-top: ch-get-space(xs);
      padding-right: ch-get-space(l);
      padding-bottom: ch-get-space(xl);
      padding-left: ch-get-space(l);

      > .ch-button.has-icon {
        padding-right: ch-calc-box-height();
      }

      > .ch-button.has-iconRight {
        padding-left: ch-calc-box-height();
      }
    }
  }

  // 5. Template nav expanded state

  @at-root .ch-template-nav.is-expanded + .ch-template-header ~ & {
    .ch-navigationPage-aside {
      > .ch-menu,
      > .ch-steps {
        @include ch-media(only, tablet) {
          left: #{ch-get-dimension(2)};
        }
      }

      @include ch-media(from, desktop) {
        left: #{ch-get-dimension(2)};
      }
    }

    .ch-navigationPage-actions {
      @include ch-media(from, desktop) {
        left: #{ch-get-dimension(2)};
      }
    }
  }

  // 6. Template header hide and sticky state

  @at-root .ch-template-header.is-sticky.is-hidden + & > #{&}-aside {
    > .ch-menu,
    > .ch-steps {
      @include ch-media(to, mobile) {
        top: 0;
      }
    }
  }

  @at-root .ch-template-header.is-sticky + & {
    @include ch-media(from, desktop) {
      border-top-color: transparent;
    }

    > .ch-navigationPage-aside {
      > .ch-menu,
      > .ch-steps {
        @include ch-media(to, tablet) {
          @include ch-border(bottom);
        }
      }
    }
  }
}
