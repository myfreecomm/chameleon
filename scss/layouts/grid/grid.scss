@import '../../abstracts/grid';

.ch-grid {
  > * {
    @include ch-grid-column(1);
  }

  @each $screen in $ch-breakpoint-screens {
    @include ch-media(from, $screen) {
      $columns-number: map-get($ch-columns-number, $screen);
      $gutter: map-get($ch-columns-gutter, $screen);

      @at-root & {
        @include ch-grid($columns-number, $gutter);
      }

      @for $i from 1 through $columns-number {
        $suffix: ch-generate-variation(($i, $screen), (undefined, mobile));
        $path: #{&}#{&}#{$suffix};

        @at-root #{$path} {
          @include ch-grid($i, $gutter);
        }

        @for $j from 1 through $i {
          $column-suffix: ch-generate-variation(($j, $screen), (1, mobile));
          $start-suffix: ch-generate-variation((start#{$j}, $screen), (undefined, mobile));

          > #{&}-column#{$column-suffix} {
            @include ch-grid-column($j);
          }

          > #{&}-column#{$start-suffix} {
            grid-column-start: $j;
          }
        } // @for $j from 1 through $i
      } // @for $i from 1 through $columns-number
    } // @include ch-media(from, $screen)
  } // @each $screen in $ch-breakpoint-screens
}
