@import '../../abstracts/space';
@import '../../abstracts/breakpoints';

.ch-grid {
  $columns-number: 12;
  $columns-width: calc(100% / #{$columns-number} - #{ch-get-space()});

  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(#{$columns-width}, 1fr));
  grid-column-gap: ch-get-space();
  grid-row-gap: ch-get-space();

  &-column {
    grid-column: span 1;
  }

  @for $i from 1 through $columns-number {
    &--#{$i} {
      grid-template-columns: repeat(#{$i}, 1fr);
    }
  }

  @for $i from 1 through $columns-number {
    > .ch-grid-column--#{$i} {
      grid-column: span $i;
    }
  }

  @each $media in $ch-breakpoint-screens {
    @if $media != desktop {
      @include ch-media(only, $media) {
        @for $i from 1 through $columns-number {
          &--#{$media}#{$i} {
            grid-template-columns: repeat(#{$i}, 1fr);
          }
        }

        @for $i from 1 through $columns-number {
          > .ch-grid-column--#{$media}#{$i} {
            grid-column: span $i;
          }
        }
      }
    }
  }
}
