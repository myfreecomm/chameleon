// @import '../../abstracts/colors';
// @import '../../abstracts/box-model';
// @import '../../abstracts/dimensions';
// @import '../../abstracts/menu';
// @import '../../abstracts/border';
// @import '../../abstracts/transition';

.ch-menu {
  // 1. item

  &-item {
    @include ch-box-model(m, squish);

    display: block;
    width: 100%;
    position: relative;

    cursor: pointer;
    color: #{ch-get-color(text, 1)};

    // 1.1. Focus interaction

    &:focus:hover,
    &:hover,
    &:focus {
      background: #{ch-get-color(neutral, 2)};
    }

    // 1.2. Active state/Sidebar

    &.is-active:before {
      $empty: '';

      @include ch-transition(opacity);
      @include ch-border-radius(circle);

      display: block;
      content: $empty;
      position: absolute;
      top: 50%;
      left: ch-get-space(xxs);
      width: ch-get-space(xxs);
      height: ch-get-icon-size();
      transform: translate(0, -50%);
      opacity: 1;

      background: #{ch-get-color(brand)};
    }

    // 1.3. Icon variation

    &#{&}--icon {
      // @extend %ch-menu-item-icon;
      @include ch-menu-item-icon;
    }

    // 1.4. Label

    &-label {
      display: block;
    }
  }

  // 2. Submenu

  &-submenu {

    // 2.1. Menu

    > .ch-menu {
      display: none;

      // 2.1.1. Item

      .ch-menu-item {
        padding-left: #{ch-get-dimension(1)};
      }
    }

    // 2.2. Arrow

    > .ch-menu-item > .ch-menu-item-arrow {
      @include ch-transition(transform, $ch-transition-duration-fast);

      transform: translate(50%, -50%);
    }

    // 2.3. Open state

    &.is-open {

      // 2.3.1. Menu

      > .ch-menu {
        display: block;

        animation: --ch-fade-in #{$ch-transition-duration-normal} #{$ch-transition-timing-function};
      }

      @keyframes --ch-fade-in {
        #{0%} {
          opacity: 0;
        }

        #{100%} {
          opacity: 1;
        }
      }

      // 2.3.2. Item

      > .ch-menu-item {
        opacity: 1;

        // 2.3.2.1. Sidebar

        &.is-active:before {
          opacity: 0;
        }

        // 2.3.2.2. Arrow

        > .ch-menu-item-arrow {
          transform: translate(50%, -50%) rotate(90deg);
        }
      }
    }
  }

  // 3. Horizontal variation

  &--horizontal {
    @extend %ch-menu-horizontal;
  }
}
