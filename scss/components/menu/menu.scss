// sass-lint:disable no-important

.ch-menu {
  // 1. item

  &-item {
    @include ch-space-inset(squish, m);

    display: block;
    width: 100%;
    position: relative;
    text-align: left;

    cursor: pointer;

    &,
    &:focus:hover,
    &:focus,
    &:hover,
    &:active {
      color: #{ch-get-color(text, 1)};
    }

    // 1.1. Focus interaction

    &:focus:hover,
    &:hover,
    &:focus {
      background: #{ch-get-color(neutral, 2)};
    }

    // 1.2. Active state/Sidebar

    &.is-active {
      font-weight: #{ch-get-text-weight(bold)};

      &:before {
        $empty: '';

        @include ch-transition(opacity);
        @include ch-border-radius(circle);

        display: block;
        content: $empty;
        position: absolute;
        top: 50%;
        left: ch-get-space(xxs);
        width: ch-get-space(xxs);
        height: ch-get-icon-size();
        transform: translate(0, -50%);
        opacity: 1;

        background: #{ch-get-color(brand)};
      }
    }

    // 1.3. Icon variation

    &#{&}--icon {
      $size: ch-calc-box-height(ch-get-text-size(2), ch-get-space(s));

      @include ch-paddingless(true);

      position: relative;

      width: #{$size};
      min-width: #{$size};
      min-height: #{$size};

      > * {
        display: none;
      }

      > .ch-icon:first-child,
      > .ch-avatar,
      > .ch-toggle-icon {
        position: absolute;
        display: block;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    }

    // 1.4. Label

    &-label {
      display: block;
    }

    // 1.5. Has icon

    &.has-icon {
      $padding: ch-get-dimension(1);

      padding-left: #{$padding} !important;

      > .ch-icon:first-child {
        left: calc((#{$padding}) / 2);
      }
    }

    &.has-iconRight {
      $padding: ch-get-dimension(1);

      padding-right: #{$padding} !important;

      > .ch-icon:first-child {
        right: calc((#{$padding}) / 2);
      }
    }
  }

  // 2. Submenu

  &-submenu {

    // 2.1. Menu

    > .ch-menu {
      display: none;

      // 2.1.1. Item

      .ch-menu-item {
        padding-left: #{ch-get-dimension(1)};
      }
    }

    // 2.2. Arrow

    > .ch-menu-item > .ch-menu-item-arrow {
      @include ch-transition(transform, $ch-transition-duration-fast);

      transform: translate(50%, -50%);
    }

    // 2.3. Open state

    &.is-open {

      // 2.3.1. Menu

      > .ch-menu {
        display: block;

        animation: --ch-fade-in #{$ch-transition-duration-normal} #{$ch-transition-timing-function};
      }

      @keyframes --ch-fade-in {
        #{0%} {
          opacity: 0;
        }

        #{100%} {
          opacity: 1;
        }
      }

      // 2.3.2. Item

      > .ch-menu-item {
        opacity: 1;

        // 2.3.2.1. Sidebar

        &.is-active {
          font-weight: #{ch-get-text-weight(normal)};

          &:before {
            opacity: 0;
          }
        }

        // 2.3.2.2. Arrow

        > .ch-menu-item-arrow {
          transform: translate(50%, -50%) rotate(90deg);
        }
      }
    }
  }

  // 3. Horizontal variation

  &--horizontal {
    @include ch-menu-horizontal;
  }
}
