@use '../../foundation/breakpoints' as breakpoints;
@use '../../foundation/colors' as colors;
@use '../../foundation/motion' as motion;
@use '../../foundation/spaces' as spaces;

.ch-steps-item {
  @include motion.transition(opacity);

  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;

  padding-left: spaces.get-space(xl);
  min-height: spaces.get-space(xl);

  counter-increment: steps;
  opacity: 0.6;

  // 1. Label

  &-label {
    @include breakpoints.media(from, tablet) {
      display: block;
      padding-top: 0;
    }

    display: none;
    width: max-content;

    padding-left: spaces.get-space(s);
  }

  // 2. Active item

  &.is-active {
    flex: 1;

    .ch-steps-item-label {
      display: block;
    }
  }

  // 3. Active, visited or completed

  &.is-active,
  &.is-visited,
  &.is-completed {
    opacity: 1;

    > .ch-title {
      color: colors.get-color(primary);
    }
  }

  &.is-active {
    @include breakpoints.media(from, tablet) {
      flex-grow: 0;
    }
  }

  // 4. Interactive variation

  // 4.1. Focus interaction

  &:hover:focus,
  &:focus,
  &:hover {
    color: colors.get-color(primary, focus);
    opacity: 1;
  }

  // 4.2. Active interaction

  &:active {
    color: colors.get-color(primary, active);
    opacity: 1;
  }

  // 5. Vertical

  @at-root .ch-steps.ch-steps--vertical #{&}-label {
    display: block;
    width: auto;
  }
}
