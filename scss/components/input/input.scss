@use '../../foundation/colors' as colors;
@use '../../foundation/depth' as depth;
@use '../../foundation/spaces' as spaces;
@use '../../foundation/thypography' as thypography;
@use '../../foundation/utils' as utils;
@use 'mixins' as *;
@use '../icon' as icon;

/***********************
STYLES DIRECTLY ON INPUT
************************/

input.ch-input,
input.ch-file,
textarea.ch-textarea {

  // 1. Base

  @include input;

  // 2. Fluid variation
  &--fluid {
    width: 100%;
  }

   // 2. Small variation

  &--small {
    @include input(xs);
  }

  // 4. Negative variation

  &--negative {
    @include input-negative;
  }
}

/***************************
STYLES ON INPUT CONTAINER
**************************/

.ch-input,
.ch-file {
  // 1. Base

  &:not(input) > input {
    @include input;
  }

  // 2. Fluid variation

  &--fluid,
  &--fluid:not(input) > input {
    width: 100%;
  }

  // 3. Negative variation

  &--negative:not(input) > input {
    @include input-negative;
  }

  // 4. Disabled variation

  &.is-disabled:not(input) > input {
    opacity: 1;
  }

  // 4. Icons variation

  &.has-leadingIcon,
  &.has-trailingIcon {
    @include spaces.paddingless(true);
    position: relative;

    > .ch-icon,
    > .ch-spinner {
      z-index: #{depth.get-z-index(1, 1)};
    }

    > .ch-icon {
      font-size: #{icon.get-icon-size(s)};
    }
  }

  &.has-leadingIcon {
    > input {
      @include icon.has-icon(leading, utils.calc-box-height(thypography.get-font-size(2), spaces.get-space(xs), spaces.get-space(xs)));
    }

    > .ch-icon:first-child,
    > .ch-spinner:first-child {
      @include icon.leading-icon(utils.calc-box-height(thypography.get-font-size(2), spaces.get-space(xs), spaces.get-space(xs)));
    }
  }

  &.has-trailingIcon {
    > input {
      @include icon.has-icon(trailing, utils.calc-box-height(thypography.get-font-size(2), spaces.get-space(xs), spaces.get-space(xs)));
    }

    > .ch-icon:last-child,
    > .ch-spinner:last-child {
      @include icon.trailing-icon(utils.calc-box-height(thypography.get-font-size(2), spaces.get-space(xs), spaces.get-space(xs)));
    }
  }

  // 5. Small variation

  &--small {
    &:not(input) > input {
      @include input(xs);
    }

    // 5.1 Icons variation

    &.has-leadingIcon,
    &.has-trailingIcon {
      > .ch-icon {
        font-size: #{icon.get-icon-size(xs)};
      }

      > .ch-spinner {
        width: #{icon.get-icon-size(s)};
        height: #{icon.get-icon-size(s)};
      }
    }
  }

  // 5. Disabled and readonly state

  @at-root {
    .is-disabled .ch-input,
    .is-readonly .ch-input {
      background-color: colors.get-color(neutral, 2);
    }
  }
}
